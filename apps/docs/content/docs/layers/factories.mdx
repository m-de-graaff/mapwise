---
title: Layer Factories
description: Functions to create layer definitions.
---

# Layer Factories

## `createGeoJsonLayer`

Creates a layer from GeoJSON data. It automatically handles the source creation and can generate multiple sub-layers (fill, stroke) from a simplified style object.

```typescript
import { createGeoJsonLayer } from '@mapwise/layers';

const layer = await createGeoJsonLayer({
  id: 'my-data',
  data: 'https://example.com/data.geojson', // URL or GeoJSON object
  cluster: true, // Optional: enable clustering
  style: {
    circleColor: '#ff0000',
    circleRadius: 8
  }
});
```

### Configuration (`GeoJsonLayerConfig`)

| Property | Type | Description |
| :--- | :--- | :--- |
| `id` | `string` | Unique layer ID. |
| `data` | `string \| object` | URL to GeoJSON or the FeatureCollection object itself. |
| `cluster` | `boolean \| object` | Enable clustering. Can pass config object `{ radius: 50, maxZoom: 14 }`. |
| `generateId` | `boolean` | If true, assigns unique IDs to features (useful for hover state). |
| `style` | `GeoJsonStyle` | Simplified styling options (see Types). |

---

## `createWmsRasterLayer`

Creates a WMS layer. It supports generic WMS servers and handles coordinate projection quirks (fixing bbox for WMS 1.3.0 vs 1.1.1).

```typescript
import { createWmsRasterLayer } from '@mapwise/layers';

const wmsLayer = createWmsRasterLayer({
  id: 'weather',
  baseUrl: 'https://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi',
  layers: 'nexrad-n0r-900913',
  format: 'image/png',
  transparent: true
});
```

### Configuration (`WmsRasterLayerConfig`)

| Property | Type | Description |
| :--- | :--- | :--- |
| `id` | `string` | Unique layer ID. |
| `baseUrl` | `string` | Base URL of the WMS service. |
| `layers` | `string \| string[]` | Comma-separated list or array of layer names. |
| `styles` | `string \| string[]` | Comma-separated list or array of style names. |
| `version` | `'1.1.1' \| '1.3.0'` | WMS version (default: '1.3.0'). |
| `crs` | `string` | Coordinate Reference System (default: 'EPSG:3857'). |

---

## `createXyzRasterLayer`

Creates a standard tiled raster layer.

```typescript
import { createXyzRasterLayer } from '@mapwise/layers';

const satellite = createXyzRasterLayer({
  id: 'satellite',
  url: 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
  controlId: 'basemap-switcher' // Group ID for exclusive visibility
});
```

### Configuration (`XyzRasterLayerConfig`)

| Property | Type | Description |
| :--- | :--- | :--- |
| `id` | `string` | Unique layer ID. |
| `url` | `string \| string[]` | Tile URL template or array of templates. |
| `tileSize` | `number` | Size of tiles (default: 256). |
| `maxzoom` | `number` | Maximum zoom level. |

---

## `createVectorTileLayer`

Creates a layer from Vector Tiles (MVT/PBF). Unlike MapLibre's raw API where you add source and layers separately, this factory groups them.

```typescript
import { createVectorTileLayer } from '@mapwise/layers';

const vectorLayer = createVectorTileLayer({
  id: 'streets',
  url: 'https://demotiles.maplibre.org/tiles/tiles.json', // TileJSON URL
  // OR
  // tiles: ['https://.../{z}/{x}/{y}.pbf'],
  
  // Style function or object to define how features are rendered
  style: (feature) => ({
    fillColor: 'gray',
    lineColor: 'black'
  })
});
```
