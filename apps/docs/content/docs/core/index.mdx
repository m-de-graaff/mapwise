---
title: "@mapwise/core"
description: The headless map engine powering Mapwise.
---

# @mapwise/core

The foundation of the Mapwise architecture. This package provides a stable, framework-safe mapping engine built on MapLibre GL JS. It handles map state, layers, events, and interaction, while remaining UI-agnostic.

## Installation

```bash
npm install @mapwise/core maplibre-gl
# or
pnpm add @mapwise/core maplibre-gl
```

## Setup

Wrap your application (or the map-specific part of it) in the `MapProvider`. This provides the `MapController` context to all child components.

```tsx
import { MapProvider } from '@mapwise/core/react';
import 'maplibre-gl/dist/maplibre-gl.css';

function App() {
  return (
    <MapProvider
      id="main-map"
      className="map-container"
      options={{
        style: 'https://demotiles.maplibre.org/style.json',
        center: [0, 0],
        zoom: 2
      }}
      onReady={() => console.log('Map is ready!')}
    >
      <MyMapApp />
    </MapProvider>
  );
}
```

### MapProvider Props

| Prop | Type | Description |
| :--- | :--- | :--- |
| `children` | `ReactNode` | Child components (UI overlays, toolbars). |
| `options` | [`MapOptions`](/docs/core/api/initialization#mapoptions) | Initial map configuration. |
| `onReady` | `() => void` | Callback when map is fully loaded and style applied. |
| `className` | `string` | CSS class for the container `<div>`. |
| `style` | `CSSProperties` | Inline styles for the container. |
| `id` | `string` | ID attribute for the container. |


## Core Concepts

### MapController

The `MapController` is the central brain of the library. It wraps the MapLibre instance and provides a cleaner, state-driven API for:
- Managing layers (`controller.layers`)
- Handling events (`controller.events`)
- Managing interaction modes (`controller.interaction`)

### Layer Registry

Mapwise uses a registry system to manage layers. Unlike standard MapLibre layers, Mapwise layers have:
- Consistent IDs
- High-level state (visibility, opacity, ordering)
- Type-safe configuration

### Event Bus

A strictly typed event system allows components to communicate without tight coupling.

## API Reference

- [Hooks](/docs/core/hooks) - React hooks for interacting with the map.
- [MapController](/docs/core/api/map-controller) - The main controller class.
- [LayerRegistry](/docs/core/api/layer-registry) - Layer management API.
