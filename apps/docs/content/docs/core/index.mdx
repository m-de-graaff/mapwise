---
title: "@mapwise/core"
description: The headless map engine and state manager.
---

# @mapwise/core

The `@mapwise/core` package is the foundation of the Mapwise system. It provides a stable, type-safe abstraction over MapLibre GL JS, managing the map lifecycle, layer state, and application events.

## Installation

```bash
pnpm add @mapwise/core maplibre-gl
```

## Core Components

The core package exposes several key modules:

### MapController
[MapController](/docs/core/map-controller) is the main entry point. `MapController` is the interface you use to interact with the map. It does not extend the MapLibre Map class but *controls* it. It exposes sub-managers for layers, plugins, events, etc.

### LayerRegistry
[LayerRegistry](/docs/core/layer-registry) manages the list of layers. It ensures that the state of layers (visibility, opacity, order) is preserved independently of the map instance, and reapplies them automatically when the style changes or the map reloads.

### EventBus
[EventBus](/docs/core/events) is a strictly typed event emitter that decoupling components. Instead of listening to raw MapLibre events, you listen to Mapwise events (`map:ready`, `layer:added`, `plugin:error`).

### React Integration
While the core is framework-agnostic, it includes first-class React support via `@mapwise/core/react`.

```tsx
import { MapProvider, useMap, useLayerState } from '@mapwise/core/react';

function MyComponent() {
  const { controller } = useMap();
  const layers = useLayerState();
  
  return <div>Layers: {layers.length}</div>;
}
```

## Basic Usage

```typescript
import { createMap } from '@mapwise/core';

const controller = createMap(document.getElementById('map'), {
  style: 'https://demotiles.maplibre.org/style.json',
  center: [0, 0],
  zoom: 2
});

await controller.awaitReady();
console.log('Map is ready!');
```
